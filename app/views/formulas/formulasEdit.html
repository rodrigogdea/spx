<div class="row">

  <div id="loadPanel" class="col-md-12 column">
    <h3 class="text-left">Actualizar Formula</h3>
    <div id="successMessage" class="alert alert-success alert-dismissable"  style="display:none;">La formula se actualizó con éxito</div>
    <div id="errorMessage" class="alert alert-danger alert-dismissable"  style="display:none;">Error!!</div>

    <div class="row clearfix">
      <div class="col-md-12 column">
        <form class="form-horizontal" role="form" ng-submit="update()">
            <div class="form-group">
                <label for="inputCodigo" class="col-sm-2 control-label">Código</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" ng-model="formula.codigo" id="inputCodigo" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="inputDescripcion" class="col-sm-2 control-label">Descripción</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" ng-model="formula.descripcion" id="inputDescripcion" required/>
                </div>
            </div>
            <div class="form-group">
                <label for="inputFases" class="col-sm-2 control-label">Fases</label>
                <div class="col-sm-10">
                    <a href="" ng-click="openAddFase()">Agregar Fase</a>
                    <table class="table table-condensed table-hover table-striped">
                      <thead>
                      <tr>
                        <th></th>
                        <th></th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr ng-repeat="fase in formula.fases">
                        <td class="col-md-2">{{ fase.descripcion }}</td>
                        <td class="col-md-1 text-right text-nowrap">
                            <a href="" ng-click="removeFase({{$index}})"><i class="glyphicon glyphicon-remove"></i></a>
                        </td>
                      </tr>
                      </tbody>
                    </table>
                    
                </div>
            </div>
        
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                  <button type="submit" class="btn btn-success">Actualizar</button>
                  &nbsp;
                  <a ng-href="#/formulas">Volver</a>
                </div>
            </div>
            
        </form>
      </div>
    </div>
  </div>
</div>

<script type="text/ng-template" id="addFaseDialog">
    <h3>Seleccionar Fase</h3>
    <table class="table table-condensed table-hover table-striped">
      <thead>
      <tr>
        <th></th>
        <th></th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="fase in fases">
        <td class="col-md-1 text-right text-nowrap"><input type="radio" name="faseRadio" ng-click="selectFase({{ $index }})"/></td>
        <td class="col-md-2">{{ fase.descripcion }}</td>
      </tr>
      </tbody>
    </table>
    <button class="btn btn-success" ng-click="endSelection() && closeThisDialog('')" >Ok</button>
</script>
